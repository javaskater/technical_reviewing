# very insteresting equality method
* The attributes are private but there are getter defined and they are not _private[this]_
```scala
scala> class Item(val description:String, val price:Double){
     | final override def equals(other:Any):Boolean = {
     | other.isInstanceOf[Item] && {
     | val that = other.asInstanceOf[Item]
     | that.description == description && that.price == price
     | }
     | }
     | }
class Item

scala> val i1 = new Item("MENA", 2.3)
val i1: Item = Item@45d58964

scala> val i2 = new Item("MENA", 2.3)
val i2: Item = Item@7895ca84

scala> val i3 = new Item("MENA", 2.5)
val i3: Item = Item@79a91206

scala> i1 == i2
val res13: Boolean = true

scala> i1 == i3
val res14: Boolean = false
```
* it is better to use the match _variable:type_ to check for equality
* the match replaces
  * _isInstanceOf_
  * _asInstanceOf_
```scala
scala> class Item(val description:String, val price:Double){
     | final override def equals(other:Any):Boolean =  other match {
     | case that:Item => that.description == description && that.price == price
     | case _ => false
     | }
     | }
class Item

scala> val i4 = new Item("MENA", 2.3)
val i4: Item = Item@15c98765

scala> val i5 = new Item("JPM", 2.3)
val i5: Item = Item@6a4b9305

scala> i4 == i5
val res15: Boolean = false

scala> val i6 = new Item("MENA", 2.3)
val i6: Item = Item@cb26deb

scala> i4 == i6
val res16: Boolean = true
```
* Why do we define the equals method as final?
> You want a.equals(b) to have the same result as b.equals(a), 
> even when b belongs to a subclass.
## hash codes:
* what the ## is see [answer 6 to this Stack Overflow](https://stackoverflow.com/questions/9068154/what-is-the-difference-between-and-hashcode)
```scala
//personal tests see book p 103
scala> val description = "MENA"
val description: String = MENA

scala> val price = 1.23
val price: Double = 1.23
scala> val mhc = (description, price).## //calulate the hashCode of the tuple !!
val mhc: Int = -2108673271
scala> val mhc2 = (description, price).hashCode() //calulate the hashCode of the tuple !!
val mhc2: Int = -2108673271
```
* the difference between _##_ and _hashCode()_
  * as explained in [answers 5 and 6 to this Stack Overflow](https://stackoverflow.com/questions/9068154/what-is-the-difference-between-and-hashcode)
  * _##_ is more consitent with _==_ as it keeps equality even if the two members are not of the same type !!!!
```scala
scala> val lng = Integer.MAX_VALUE.toLong + 1
val lng: Long = 2147483648

scala> val dbl = Integer.MAX_VALUE.toDouble + 1
val dbl: Double = 2.147483648E9

scala> lng==dbl
val res18: Boolean = true

scala> lng.hashCode() == dbl.hashCode()
val res19: Boolean = false

scala> (lng.##, lng.hashCode())
val res20: (Int, Int) = (-2147483648,-2147483648)

scala> (dbl.##, dbl.hashCode())
val res21: (Int, Int) = (-2147483648,1105199104)

scala> lng.## == dbl.##
val res22: Boolean = true
```